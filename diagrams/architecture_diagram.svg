<svg viewBox="0 0 1200 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7b1fa2" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="700" fill="#f8fafc" />

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-size="20" font-weight="bold" fill="#1e293b">Wooverzicht System
    Architecture</text>

  <!-- Container sections -->

  <!-- User Query Flow -->
  <rect x="30" y="60" width="600" height="350" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="8" />
  <text x="280" y="85" text-anchor="middle" font-size="16" font-weight="bold" fill="#1976d2">Query Processing
    Flow</text>

  <!-- Data Pipeline -->
  <rect x="720" y="60" width="450" height="200" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="8" />
  <text x="970" y="85" text-anchor="middle" font-size="16" font-weight="bold" fill="#7b1fa2">Data Collection
    Pipeline</text>

  <!-- Shared Database -->
  <rect x="770" y="300" width="400" height="110" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="8" />
  <text x="970" y="325" text-anchor="middle" font-size="16" font-weight="bold" fill="#f57c00">Vector Database</text>

  <!-- FRONTEND CONTAINER -->
  <rect x="50" y="110" width="180" height="120" fill="#ffffff" stroke="#2196f3" stroke-width="2" rx="6" />
  <text x="140" y="130" text-anchor="middle" font-size="14" font-weight="bold" fill="#1976d2">Frontend Container</text>
  <text x="140" y="145" text-anchor="middle" font-size="12" fill="#1976d2">Next.js + TypeScript</text>

  <text x="60" y="175" font-size="11" fill="#333">• Search interface</text>
  <text x="60" y="190" font-size="11" fill="#333">• Filter controls</text>
  <text x="60" y="205" font-size="11" fill="#333">• Results display</text>

  <!-- BACKEND CONTAINER -->
  <rect x="330" y="110" width="220" height="180" fill="#ffffff" stroke="#ff9800" stroke-width="2" rx="6" />
  <text x="440" y="130" text-anchor="middle" font-size="14" font-weight="bold" fill="#f57c00">Backend API
    Container</text>
  <text x="440" y="145" text-anchor="middle" font-size="12" fill="#f57c00">FastAPI + Python</text>

  <!-- API Endpoint -->
  <rect x="340" y="160" width="200" height="35" fill="#fff3e0" stroke="#f57c00" rx="4" />
  <text x="440" y="175" text-anchor="middle" font-size="11" font-weight="bold" fill="#f57c00">API Endpoint</text>
  <text x="440" y="187" text-anchor="middle" font-size="10" fill="#f57c00">HTTP Request/Response handling</text>

  <!-- Vector Search Engine -->
  <rect x="340" y="218" width="200" height="52" fill="#fff3e0" stroke="#f57c00" rx="4" />
  <text x="440" y="233" text-anchor="middle" font-size="11" font-weight="bold" fill="#f57c00">Vector Search
    Engine</text>
  <text x="440" y="245" text-anchor="middle" font-size="10" fill="#f57c00">Embedding the query </text>
  <text x="440" y="258" text-anchor="middle" font-size="10" fill="#f57c00"> + Similarity Search</text>

  <!-- User -->
  <ellipse cx="140" cy="350" rx="50" ry="25" fill="#4caf50" stroke="#388e3c" stroke-width="2" />
  <text x="140" y="357" text-anchor="middle" font-size="12" font-weight="bold" fill="white">User</text>

  <!-- PIPELINE CONTAINER -->
  <rect x="740" y="110" width="160" height="120" fill="#ffffff" stroke="#9c27b0" stroke-width="2" rx="6" />
  <text x="820" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="#7b1fa2">Pipeline Container</text>
  <text x="820" y="145" text-anchor="middle" font-size="11" fill="#7b1fa2">Python + Docker</text>

  <text x="750" y="165" font-size="10" fill="#333">• Web scraping</text>
  <text x="750" y="180" font-size="10" fill="#333">• PDF text extraction</text>
  <text x="750" y="195" font-size="10" fill="#333">• Document chunking</text>
  <text x="750" y="210" font-size="10" fill="#333">• Vector generation</text>

  <!-- EXTERNAL SERVICES -->

  <!-- Province Websites -->
  <rect x="1015" y="110" width="140" height="60" fill="#ffffff" stroke="#9c27b0" stroke-width="2" rx="6" />
  <text x="1085" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="#7b1fa2">Province Websites</text>
  <text x="1085" y="145" text-anchor="middle" font-size="10" fill="#7b1fa2">WOO Documents</text>
  <text x="1085" y="158" text-anchor="middle" font-size="10" fill="#7b1fa2">(PDF)</text>

  <!-- OpenAI -->
  <rect x="1015" y="190" width="140" height="50" fill="#e8f5e8" stroke="#4caf50" stroke-width="2" rx="6" />
  <text x="1085" y="210" text-anchor="middle" font-size="12" font-weight="bold" fill="#4caf50">OpenAI API</text>
  <text x="1085" y="225" text-anchor="middle" font-size="10" fill="#4caf50">text-embedding-3-small</text>

  <!-- VECTOR DATABASE -->
  <rect x="790" y="340" width="360" height="57" fill="#ffffff" stroke="#ff9800" stroke-width="2" rx="6" />
  <text x="970" y="360" text-anchor="middle" font-size="14" font-weight="bold" fill="#f57c00">ChromaDB
    (Persistent)</text>
  <text x="970" y="375" text-anchor="middle" font-size="11" fill="#f57c00">Document chunks + embeddings </text>
  <text x="970" y="387" text-anchor="middle" font-size="11" fill="#f57c00">+ metadata
    (province, date, type, etc.)</text>


  <!-- ARROWS AND FLOW -->

  <!-- User interaction -->
  <line x1="150" y1="325" x2="150" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="160" y="290" font-size="10" fill="#333">Query + Filters</text>

  <!-- Frontend to Backend -->
  <line x1="230" y1="170" x2="330" y2="170" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="240" y="165" font-size="10" fill="#333">HTTP POST</text>

  <!-- Backend to OpenAI -->
  <line x1="550" y1="215" x2="570" y2="215" stroke="#333" stroke-width="2" />
  <line x1="570" y1="215" x2="570" y2="290" stroke="#333" stroke-width="2" />
  <line x1="570" y1="290" x2="1020" y2="290" stroke="#333" stroke-width="2" />
  <line x1="1020" y1="290" x2="1020" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="650" y="285" font-size="9" fill="#333">Generate embeddings</text>

  <!-- Backend to Database -->
  <line x1="390" y1="290" x2="390" y2="310" stroke="#333" stroke-width="2" />
  <line x1="390" y1="310" x2="820" y2="310" stroke="#333" stroke-width="2" />
  <line x1="820" y1="310" x2="820" y2="340" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="450" y="305" font-size="9" fill="#333">Vector search</text>

  <!-- Database back to Backend -->
  <line x1="375" y1="360" x2="790" y2="360" stroke="#4caf50" stroke-width="2" />
  <line x1="375" y1="360" x2="375" y2="290" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead-green)" />
  <text x="440" y="345" font-size="9" fill="#4caf50">Return matches</text>

  <!-- Backend to Frontend -->
  <line x1="330" y1="200" x2="230" y2="200" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead-green)" />
  <text x="240" y="190" font-size="10" fill="#4caf50">JSON response</text>

  <!-- Frontend to User -->
  <line x1="135" y1="230" x2="135" y2="324" stroke="#4caf50" stroke-width="2" marker-end="url(#arrowhead-green)" />
  <text x="40" y="275" font-size="10" fill="#4caf50">Display results</text>

  <!-- PIPELINE FLOWS -->

  <!-- Websites to Pipeline -->
  <line x1="1015" y1="140" x2="900" y2="140" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrowhead-purple)" />
  <text x="920" y="130" font-size="9" fill="#7b1fa2">Scrape docs</text>

  <!-- Pipeline to OpenAI -->
  <line x1="900" y1="205" x2="1015" y2="205" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrowhead-purple)" />
  <text x="905" y="195" font-size="9" fill="#7b1fa2">Generate embeddings</text>

  <!-- Pipeline to Database -->
  <line x1="870" y1="230" x2="870" y2="340" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrowhead-purple)" />
  <text x="735" y="249" font-size="9" fill="#7b1fa2">Store vectors + metadata</text>

  <!-- DEPLOYMENT INFO -->
  <rect x="30" y="450" width="1140" height="120" fill="#f1f5f9" stroke="#64748b" stroke-width="1" rx="6" />
  <text x="600" y="475" text-anchor="middle" font-size="16" font-weight="bold" fill="#334155">Deployment
    Architecture</text>

  <!-- Docker info -->
  <rect x="50" y="490" width="200" height="70" fill="#ffffff" stroke="#2196f3" stroke-width="1" rx="4" />
  <text x="150" y="510" text-anchor="middle" font-size="12" font-weight="bold" fill="#1976d2">Docker Compose</text>
  <text x="60" y="529" font-size="10" fill="#333">• Multi-container orchestration</text>
  <text x="60" y="543" font-size="10" fill="#333">• Shared volume for database</text>
  <text x="60" y="555" font-size="10" fill="#333">• Environment configuration</text>

  <!-- Runtime -->
  <rect x="330" y="490" width="210" height="70" fill="#ffffff" stroke="#ff9800" stroke-width="1" rx="4" />
  <text x="430" y="510" text-anchor="middle" font-size="12" font-weight="bold" fill="#f57c00">Runtime Model</text>
  <text x="340" y="529" font-size="10" fill="#333">• Frontend + API: Always running</text>
  <text x="340" y="543" font-size="10" fill="#333">• Pipeline: On-demand execution</text>
  <text x="340" y="555" font-size="10" fill="#333">• Database: Persistent storage</text>

  <!-- Tech Stack -->
  <rect x="630" y="490" width="200" height="70" fill="#ffffff" stroke="#4caf50" stroke-width="1" rx="4" />
  <text x="730" y="510" text-anchor="middle" font-size="12" font-weight="bold" fill="#4caf50">Key Technologies</text>
  <text x="640" y="529" font-size="10" fill="#333">• Vector similarity search</text>
  <text x="640" y="543" font-size="10" fill="#333">• Semantic embeddings</text>
  <text x="640" y="555" font-size="10" fill="#333">• Metadata filtering</text>

  <!-- Scaling -->
  <rect x="940" y="490" width="200" height="70" fill="#ffffff" stroke="#9c27b0" stroke-width="1" rx="4" />
  <text x="1040" y="510" text-anchor="middle" font-size="12" font-weight="bold" fill="#7b1fa2">Data Processing</text>
  <text x="950" y="529" font-size="10" fill="#333">• Scheduled/manual updates</text>
  <text x="950" y="543" font-size="10" fill="#333">• Incremental data loading</text>
  <text x="950" y="555" font-size="10" fill="#333">• Province-specific scrapers</text>

  <!-- Flow labels -->
  <text x="30" y="635" font-size="12" font-weight="bold" fill="#1976d2">Query Flow:</text>
  <text x="130" y="635" font-size="11" fill="#333">User search → API validation → Vector similarity → Ranked
    results</text>

  <text x="30" y="655" font-size="12" font-weight="bold" fill="#7b1fa2">Data Collection Flow:</text>
  <text x="200" y="655" font-size="11" fill="#333">Web scraping → Text extraction → Chunking → Embedding → Database
    storage</text>
</svg>